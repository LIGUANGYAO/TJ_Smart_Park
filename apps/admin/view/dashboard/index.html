{extend name="public/base"/}
{block name="style"}
  <style type="text/css">

      /*外盒子*/
      .common-room {
          position: relative;
          box-sizing: border-box;
          width: 99%;
          min-width: 1540px;
          padding: 10px;
          background-color: #f3f6f9;
          margin-bottom: 15px;
      }
      /*选择楼宇的选择框*/
      select {
          padding: 3px 4px;
          height: 33px;
          color: #858585;
      }
      .select-builds{
          position: relative;
          left: 160px;
      }
      .select-builds h3 {
          margin: 10px;
          padding: 5px;
          color: #667690;
          font-size: 22px;
      }
      #buildName {
          position: absolute;
          top: 0;
          left: 140px;
      }

      /*可视化楼宇*/
      .index-build-plane{
          width: 437px;
          height: 580px;
          position: relative;
          left: 160px;
          display: inline-block;
          padding: 10px;
          vertical-align: top;
          background-image: url(http://www.hacyy.com/public/img/floor_img/floor_bg.png);
      }
      .index-build-plane h3{
          margin: 10px;
          padding: 5px;
          color: #667690;
          font-size: 22px;
      }
      .index-bulid-list{
          list-style: none;
          margin:0;
          padding: 0;
          margin-top: 120px;
      }
      .common-floor-bottom{
          position: relative;
      }
      .index-floor{
          cursor: pointer;
      }
      /*悬浮放大*/
      .index-floor:hover{
          transition: all .3s;
          transform: scale(1.05);
      }

      /*公用的svg图*/
      .index-room-plane {
          position: absolute;
          display: inline-block;
          text-align: center;
          top: 30px;
          right: 280px;
          z-index: 999;
      }


      /*状态以及房间详情*/
      .index-room-container {
          display: inline-block;
          position: absolute;
          top: 350px;
          right: 280px;
          z-index: 999;
      }


      .legend{
          padding: 10px;
          text-align: center;
          margin-bottom: 40px;
      }
      .legend-text{
          margin-right: 30px;
      }
      .index-room-info{
          box-sizing: border-box;
          background-color: #e9f1f8;
          color: #667690;
          padding-left: 9%;
          font-size: 16px;
          font-weight: 600;
          min-width: 650px;
      }

      .index-room-info ul{
          list-style: none;
          margin:0;
          padding: 0;
       }

      .index-room-info-title {
          background-color: #e4edf5;
          padding-top: 15px;
          padding-bottom: 15px;
          margin: 0;
          font-weight: 600;
      }
      .index-room-left{
          width: 30%;
      }
      .index-room-right {
          width: 60%;
      }
      .inline-block{
          display: inline-block;
      }
      .index-room-left li, .index-room-right li {
          margin: 20px 0;
      }



  </style>
{/block}

{block name="main"}
<section class="content pt-5">
  <!--此页面主体内容-->
    <div class="common-room">
        <!--选择楼宇栏-->
        <div class="select-builds">
            <h3>房源平面图</h3>
            <select id="buildName"></select>
        </div>
        <!--楼宇可视图层-->
        <div class="container-box">
        <!--9号楼-->

        <div class="build">
            <div class="index-build-plane">
                <h3><span class="index-room-floor"></span>F</h3>
                <ul class="index-bulid-list">
                    <li class="index-floor common-floor-bottom" data-float="4"><img
                            src="__ADMIN_IMG__/builds_9/floor_4.png" alt=""></li>
                    <li class="index-floor common-floor-bottom" data-float="3"><img
                            src="__ADMIN_IMG__/builds_9/floor_3.png" alt=""></li>
                    <li class="index-floor common-floor-bottom" data-float="2"><img
                            src="__ADMIN_IMG__/builds_9/floor_2.png" alt=""></li>
                    <li class="index-floor common-floor-bottom" data-float="1"><img
                            src="__ADMIN_IMG__/builds_9/floor_1.png" alt=""></li>
                </ul>
            </div>

        </div>
    </div>

        <!--公用的svg图-->
        <div class="index-room-plane">
            <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                 width="650" height="248" viewBox="0 0 1621 620"
                 preserveAspectRatio="xMidYMid meet">
                <g transform="translate(0.000000,723.000000) scale(0.100000,-0.100000)"
                   fill="#000000" stroke="none">
                    <path d="M4850 5560 l0 -310 -45 0 c-43 0 -45 -1 -45 -30 0 -28 3 -30 35 -30
34 0 35 -1 35 -40 l0 -40 70 0 70 0 0 70 0 70 -30 0 c-25 0 -30 4 -30 25 l0
25 290 0 290 0 0 -40 c0 -38 2 -40 30 -40 l30 0 0 -460 0 -460 -30 0 -30 0 0
-70 0 -70 30 0 30 0 0 -615 0 -615 -90 0 -90 0 0 -30 0 -30 60 0 60 0 0 -45 0
-45 70 0 70 0 0 45 0 45 265 0 265 0 0 -40 0 -40 70 0 70 0 0 70 0 70 -355 0
-355 0 0 615 c0 608 0 615 20 615 18 0 20 7 20 70 0 63 -2 70 -20 70 -20 0
-20 7 -20 460 0 453 0 460 20 460 17 0 20 7 20 40 l0 40 295 0 295 0 0 -185 0
-185 -210 0 c-203 0 -210 -1 -210 -20 0 -19 7 -20 211 -20 210 0 210 0 207
-22 -3 -18 -34 -32 -203 -95 -110 -40 -206 -76 -214 -78 -8 -3 -11 -8 -9 -11
3 -3 23 2 43 10 21 9 39 16 41 16 2 0 4 -94 4 -210 l0 -210 170 0 170 0 0 -65
0 -65 70 0 c68 0 70 1 70 25 l0 25 248 0 249 0 23 -25 c30 -32 70 -32 98 -2
29 31 28 68 -3 97 -24 22 -25 29 -25 132 0 101 -1 108 -20 108 -19 0 -20 -7
-20 -107 0 -102 -1 -108 -27 -135 l-27 -28 -248 0 -248 0 0 25 c0 23 -3 25
-50 25 l-50 0 0 195 0 195 345 0 c338 0 345 0 345 20 0 20 -7 20 -345 20
l-345 0 0 175 0 175 50 0 50 0 0 55 0 55 245 0 245 0 0 -55 c0 -54 0 -55 30
-55 l30 0 0 -90 c0 -83 1 -90 20 -90 19 0 20 7 20 90 0 83 1 90 20 90 18 0 20
7 20 55 l0 55 70 0 70 0 0 30 0 30 -425 0 -425 0 0 310 0 310 -715 0 -715 0 0
-310z m50 140 c0 -153 -1 -160 -20 -160 -19 0 -20 7 -20 160 0 153 1 160 20
160 19 0 20 -7 20 -160z m1320 135 l0 -25 -655 0 -655 0 0 25 0 25 655 0 655
0 0 -25z m50 -135 c0 -153 -1 -160 -20 -160 -19 0 -20 7 -20 160 0 153 1 160
20 160 19 0 20 -7 20 -160z m-50 70 l0 -30 -655 0 -655 0 0 30 0 30 655 0 655
0 0 -30z m0 -225 l0 -185 -655 0 -655 0 0 185 0 185 655 0 655 0 0 -185z m-3
-721 c-3 -3 -12 -4 -19 -1 -8 3 -5 6 6 6 11 1 17 -2 13 -5z m3 -39 c0 -25 0
-25 -97 -25 -53 0 -94 2 -91 5 13 13 117 44 151 44 33 1 37 -2 37 -24z m0 -55
c0 -19 -7 -20 -150 -20 -82 0 -150 4 -150 8 0 19 63 30 178 31 116 1 122 0
122 -19z m0 -50 c0 -19 -7 -20 -150 -20 -143 0 -150 1 -150 20 0 19 7 20 150
20 143 0 150 -1 150 -20z m0 -85 l0 -55 -70 0 c-63 0 -70 2 -70 20 0 18 7 20
68 22 37 0 52 3 33 5 -19 3 -49 15 -66 29 -39 30 -41 30 -81 -1 -22 -17 -45
-25 -73 -25 -39 0 -41 2 -41 30 l0 30 150 0 150 0 0 -55z m-150 10 c0 -9 -9
-15 -22 -15 -22 1 -23 1 -4 15 25 19 26 19 26 0z m50 -10 c0 -3 -9 -5 -20 -5
-11 0 -20 7 -20 15 0 13 4 14 20 5 11 -6 20 -13 20 -15z m-50 -35 c0 -18 -7
-20 -75 -20 -68 0 -75 2 -75 20 0 18 7 20 75 20 68 0 75 -2 75 -20z m0 -50 c0
-18 -7 -20 -75 -20 -68 0 -75 2 -75 20 0 18 7 20 75 20 68 0 75 -2 75 -20z
m150 -80 l0 -100 -70 0 c-63 0 -70 2 -70 20 0 18 7 20 68 22 l67 2 -67 3 c-65
4 -68 5 -68 28 0 24 3 25 68 27 l67 2 -67 3 c-60 3 -68 6 -68 23 0 18 8 20 68
22 l67 2 -67 3 c-60 3 -68 6 -68 23 0 18 7 20 70 20 l70 0 0 -100z m-150 30
c0 -18 -7 -20 -75 -20 -68 0 -75 2 -75 20 0 18 7 20 75 20 68 0 75 -2 75 -20z
m0 -55 c0 -24 -2 -25 -75 -25 -73 0 -75 1 -75 25 0 24 2 25 75 25 73 0 75 -1
75 -25z m0 -55 c0 -18 -7 -20 -75 -20 -68 0 -75 2 -75 20 0 18 7 20 75 20 68
0 75 -2 75 -20z"/>
                    <path d="M7990 5560 l0 -310 -35 0 c-32 0 -35 -2 -35 -30 0 -28 3 -30 35 -30
l35 0 0 -225 0 -225 485 0 485 0 0 -218 0 -219 -25 -23 c-14 -14 -25 -35 -25
-50 0 -15 11 -36 25 -50 l25 -23 0 -614 0 -613 -25 0 c-24 0 -25 -2 -25 -70
l0 -70 70 0 70 0 0 70 c0 68 -1 70 -25 70 l-25 0 0 613 0 614 25 23 c14 14 25
35 25 50 0 15 -11 36 -25 50 l-25 23 0 219 0 218 510 0 510 0 0 225 0 225 25
0 c21 0 25 5 25 30 l0 30 -440 0 -440 0 0 -30 0 -30 145 0 145 0 0 -55 0 -55
70 0 70 0 0 55 0 55 180 0 180 0 0 -205 0 -205 -490 0 -490 0 0 205 c0 130 4
205 10 205 6 0 10 14 10 30 0 28 -2 30 -40 30 -38 0 -40 -2 -40 -30 0 -16 5
-30 10 -30 6 0 10 -75 10 -205 l0 -205 -465 0 -465 0 0 150 0 150 50 0 50 0 0
55 0 55 315 0 315 0 0 30 0 30 -355 0 -355 0 0 240 0 240 1135 0 1135 0 0
-240 0 -240 -40 0 c-38 0 -40 -2 -40 -30 0 -23 4 -30 20 -30 18 0 20 -7 20
-55 0 -48 2 -55 20 -55 20 0 20 -7 20 -385 l0 -385 -50 0 -50 0 0 -70 0 -70
50 0 50 0 0 -600 0 -600 -50 0 -50 0 0 -70 0 -70 50 0 50 0 0 -60 0 -60 -320
0 -320 0 0 40 c0 33 3 40 20 40 18 0 20 7 20 70 l0 70 -200 0 -200 0 0 -30 0
-30 130 0 130 0 0 -40 c0 -33 3 -40 20 -40 17 0 20 -7 20 -40 0 -33 -3 -40
-20 -40 -18 0 -20 -7 -20 -70 l0 -70 70 0 70 0 0 40 0 40 255 0 255 0 0 -40 0
-40 68 0 67 0 -3 1095 c-3 987 -2 1095 12 1095 14 0 16 -110 16 -1095 l0
-1095 70 0 70 0 0 40 0 40 40 0 c38 0 40 2 40 30 l0 30 -90 0 -90 0 0 615 0
615 50 0 50 0 0 70 0 70 -50 0 -50 0 0 300 0 300 50 0 50 0 0 70 0 70 -75 0
-75 0 0 130 c0 123 1 130 20 130 18 0 20 7 20 70 0 63 -2 70 -20 70 -20 0 -20
7 -20 325 l0 325 -1195 0 -1195 0 0 -310z m50 140 c0 -153 -1 -160 -20 -160
-19 0 -20 7 -20 160 0 153 1 160 20 160 19 0 20 -7 20 -160z m2280 135 l0 -25
-1135 0 -1135 0 0 25 0 25 1135 0 1135 0 0 -25z m50 -135 c0 -153 -1 -160 -20
-160 -19 0 -20 7 -20 160 0 153 1 160 20 160 19 0 20 -7 20 -160z m-50 70 l0
-30 -1135 0 -1135 0 0 30 0 30 1135 0 1135 0 0 -30z"/>
                    <path d="M760 4930 l0 -430 -180 0 -180 0 0 -320 0 -320 435 0 435 0 0 -630 0
-630 165 0 165 0 0 -50 0 -50 95 0 c78 0 95 3 95 15 0 13 422 15 3740 15
l3740 0 0 -70 0 -70 2260 0 c1500 0 2260 -3 2260 -10 0 -5 14 -10 30 -10 l30
0 0 140 0 140 345 0 345 0 0 900 0 900 -345 0 -345 0 0 190 0 190 -205 0 -205
0 0 -30 0 -30 135 0 135 0 0 -40 0 -40 40 0 40 0 0 -290 0 -290 -40 0 -40 0 0
-70 0 -70 50 0 50 0 0 -630 0 -630 -505 0 -505 0 0 -30 0 -30 135 0 135 0 0
-40 0 -40 70 0 70 0 0 40 0 40 250 0 250 0 0 -40 0 -40 40 0 40 0 0 -50 0 -50
-2225 0 -2225 0 0 70 0 70 -3775 0 -3775 0 0 125 0 125 135 0 135 0 0 -40 0
-40 70 0 70 0 0 70 0 70 -390 0 -390 0 0 -70 0 -70 65 0 65 0 0 -60 0 -60
-110 0 -110 0 0 610 0 610 75 0 75 0 0 140 c0 118 2 140 15 140 12 0 15 14 15
70 0 56 -3 70 -15 70 -13 0 -15 52 -15 405 0 353 2 405 15 405 11 0 15 11 15
40 l0 40 285 0 285 0 0 -40 0 -40 70 0 70 0 0 40 0 40 155 0 155 0 0 30 0 30
-515 0 -515 0 0 55 0 55 -370 0 -370 0 0 -430z m680 345 c0 -22 -4 -25 -35
-25 l-35 0 0 -70 0 -70 35 0 35 0 0 -143 0 -142 -202 -74 c-112 -41 -207 -78
-213 -82 -14 -13 1 -11 42 6 19 8 37 15 39 15 2 0 4 -94 4 -210 l0 -210 130 0
130 0 0 -55 0 -55 35 0 35 0 0 -120 0 -120 -310 0 -310 0 0 25 c0 21 -5 25
-30 25 -25 0 -30 -4 -30 -25 l0 -25 -110 0 -110 0 0 260 0 260 110 0 110 0 0
-140 0 -140 30 0 30 0 0 570 0 570 310 0 310 0 0 -25z m0 -510 c0 -25 -1 -25
-92 -25 -50 0 -89 2 -86 5 12 12 116 44 146 44 28 1 32 -2 32 -24z m0 -55 c0
-19 -7 -20 -145 -20 -80 0 -145 4 -145 8 0 19 62 30 173 31 111 1 117 0 117
-19z m0 -50 c0 -19 -7 -20 -145 -20 -138 0 -145 1 -145 20 0 19 7 20 145 20
138 0 145 -1 145 -20z m0 -60 l0 -30 -145 0 -145 0 0 30 0 30 145 0 145 0 0
-30z m0 -60 c0 -19 -7 -20 -145 -20 -138 0 -145 1 -145 20 0 19 7 20 145 20
138 0 145 -1 145 -20z m0 -50 c0 -19 -7 -20 -145 -20 -138 0 -145 1 -145 20 0
19 7 20 145 20 138 0 145 -1 145 -20z m-690 -20 c0 -19 -7 -20 -170 -20 -163
0 -170 1 -170 20 0 19 7 20 170 20 163 0 170 -1 170 -20z m690 -30 c0 -19 -7
-20 -145 -20 -138 0 -145 1 -145 20 0 19 7 20 145 20 138 0 145 -1 145 -20z
m-970 -260 l0 -260 -30 0 -30 0 0 260 0 260 30 0 30 0 0 -260z m60 0 l0 -260
-25 0 -25 0 0 260 0 260 25 0 25 0 0 -260z m13950 230 l0 -30 -315 0 -315 0 0
30 0 30 315 0 315 0 0 -30z m50 -160 c0 -183 -1 -190 -20 -190 -19 0 -20 7
-20 190 0 183 1 190 20 190 19 0 20 -7 20 -190z m-13090 135 l0 -25 -145 0
-145 0 0 25 0 25 145 0 145 0 0 -25z m13040 -45 l0 -30 -315 0 -315 0 0 30 0
30 315 0 315 0 0 -30z m-13040 -10 c0 -19 -7 -20 -145 -20 -138 0 -145 1 -145
20 0 19 7 20 145 20 138 0 145 -1 145 -20z m13040 -165 l0 -135 -70 0 -70 0 0
-30 0 -30 70 0 70 0 0 -630 0 -630 -315 0 -315 0 0 228 0 227 203 74 c111 41
206 78 211 82 15 13 0 11 -41 -6 -19 -8 -37 -15 -39 -15 -2 0 -4 95 -4 210 l0
210 -165 0 -165 0 0 130 0 130 75 0 75 0 0 30 0 30 -75 0 -75 0 0 130 0 130
315 0 315 0 0 -135z m-13730 -275 c0 -19 -7 -20 -170 -20 -163 0 -170 1 -170
20 0 19 7 20 170 20 163 0 170 -1 170 -20z m13390 -230 c0 -19 -7 -20 -145
-20 -138 0 -145 1 -145 20 0 19 7 20 145 20 138 0 145 -1 145 -20z m0 -55 l0
-25 -145 0 -145 0 0 25 0 25 145 0 145 0 0 -25z m0 -55 c0 -19 -7 -20 -145
-20 -138 0 -145 1 -145 20 0 19 7 20 145 20 138 0 145 -1 145 -20z m0 -50 c0
-19 -7 -20 -145 -20 -138 0 -145 1 -145 20 0 19 7 20 145 20 138 0 145 -1 145
-20z m0 -50 c0 -19 -7 -20 -145 -20 -138 0 -145 1 -145 20 0 19 7 20 145 20
138 0 145 -1 145 -20z m0 -60 l0 -30 -145 0 -145 0 0 30 0 30 145 0 145 0 0
-30z m0 -60 c0 -19 -7 -20 -145 -20 -138 0 -145 1 -145 20 0 19 7 20 145 20
138 0 145 -1 145 -20z m0 -39 c0 -19 -68 -31 -176 -31 -107 0 -114 1 -114 20
0 19 7 20 145 20 80 0 145 -4 145 -9z m-110 -45 c0 -8 -125 -46 -152 -46 -23
0 -28 4 -28 25 0 25 1 25 90 25 50 0 90 -2 90 -4z m-12280 -546 l0 -160 -55 0
-55 0 0 160 0 160 55 0 55 0 0 -160z m7580 -170 l0 -70 2230 0 2230 0 0 -30 0
-30 -2255 0 -2255 0 0 70 0 70 -3745 0 -3745 0 0 30 0 30 3770 0 3770 0 0 -70z
m4510 -55 c0 -88 -1 -95 -20 -95 -19 0 -20 7 -20 95 0 88 1 95 20 95 19 0 20
-7 20 -95z"/>
                    <path d="M2720 5220 c0 -25 4 -30 25 -30 23 0 25 -4 25 -40 0 -36 3 -40 25
-40 l25 0 0 -403 0 -404 -25 -23 c-14 -14 -25 -35 -25 -50 0 -15 11 -36 25
-50 l25 -23 0 -614 0 -613 -165 0 -165 0 0 -30 0 -30 130 0 130 0 0 -45 0 -45
70 0 70 0 0 70 c0 54 -4 72 -15 76 -13 5 -15 83 -15 618 l0 613 25 23 c14 14
25 35 25 50 0 15 -11 36 -25 50 l-25 23 0 404 0 403 25 0 c23 0 25 4 25 40 l0
40 150 0 150 0 0 30 0 30 -245 0 -245 0 0 -30z"/>
                    <path d="M3400 5220 c0 -27 3 -30 30 -30 28 0 30 -2 30 -40 l0 -40 70 0 70 0
0 40 0 40 270 0 270 0 0 -40 c0 -36 3 -40 25 -40 l25 0 0 -403 0 -404 -25 -23
c-14 -14 -25 -35 -25 -50 0 -15 11 -36 25 -50 l25 -23 0 -614 0 -613 -510 0
-510 0 0 -30 0 -30 135 0 135 0 0 -45 0 -45 70 0 70 0 0 45 0 45 275 0 275 0
0 -45 0 -45 70 0 70 0 0 45 0 45 285 0 285 0 0 -45 0 -45 70 0 70 0 0 45 0 45
50 0 c49 0 50 1 50 30 l0 30 -425 0 -425 0 0 613 0 614 25 23 c14 14 25 35 25
50 0 15 -11 36 -25 50 l-25 23 0 404 0 403 25 0 c23 0 25 4 25 40 l0 40 150 0
150 0 0 30 0 30 -590 0 -590 0 0 -30z"/>
                    <path d="M7430 5220 c0 -29 1 -30 50 -30 l50 0 0 -55 c0 -54 0 -55 30 -55 l30
0 0 -393 c0 -381 -1 -394 -20 -412 -11 -10 -20 -30 -20 -45 0 -15 9 -35 20
-45 20 -18 20 -31 20 -637 l0 -618 -355 0 -355 0 0 -70 0 -70 70 0 70 0 0 40
0 40 265 0 265 0 0 -40 0 -40 70 0 70 0 0 40 0 40 265 0 265 0 0 -40 0 -40 70
0 70 0 0 40 0 40 145 0 145 0 0 30 0 30 -510 0 -510 0 0 611 0 610 30 26 c20
17 30 34 30 53 0 19 -10 36 -30 53 l-30 26 0 385 c0 379 0 386 20 386 18 0 20
7 20 55 l0 55 35 0 c32 0 35 2 35 30 l0 30 -155 0 -155 0 0 -30z"/>
                    <path d="M10720 4800 l0 -30 155 0 155 0 0 -40 0 -40 70 0 70 0 0 40 0 40 270
0 270 0 0 -40 0 -40 70 0 70 0 0 40 c0 33 3 40 20 40 16 0 20 7 20 30 l0 30
-585 0 -585 0 0 -30z"/>
                    <path d="M12070 4800 l0 -30 160 0 160 0 0 -40 c0 -36 3 -40 25 -40 l25 0 0
-303 0 -304 -25 -23 c-14 -14 -25 -35 -25 -50 0 -15 11 -36 25 -50 l25 -23 0
-614 0 -613 -85 0 -85 0 0 -30 c0 -29 2 -30 45 -30 l45 0 0 -40 0 -40 70 0 70
0 0 70 c0 40 -4 70 -10 70 -7 0 -10 211 -10 613 l0 614 25 23 c14 14 25 35 25
50 0 15 -11 36 -25 50 l-25 23 0 304 0 303 25 0 c23 0 25 4 25 40 l0 40 270 0
270 0 0 -40 0 -40 70 0 70 0 0 40 c0 33 3 40 20 40 16 0 20 7 20 30 l0 30
-590 0 -590 0 0 -30z"/>
                    <path d="M2102 4277 c-28 -30 -28 -68 1 -95 30 -28 68 -28 95 1 28 30 28 68
-1 95 -30 28 -68 28 -95 -1z"/>
                    <path d="M3472 4277 c-28 -30 -28 -68 1 -95 30 -28 68 -28 95 1 28 30 28 68
-1 95 -30 28 -68 28 -95 -1z"/>
                    <path d="M4830 4230 l0 -70 70 0 70 0 0 70 0 70 -70 0 -70 0 0 -70z"/>
                    <path d="M8252 4277 c-28 -30 -28 -68 1 -95 30 -28 68 -28 95 1 28 30 28 68
-1 95 -30 28 -68 28 -95 -1z"/>
                    <path d="M9612 4277 c-28 -30 -28 -68 1 -95 30 -28 68 -28 95 1 28 30 28 68
-1 95 -30 28 -68 28 -95 -1z"/>
                    <path d="M11052 4057 c-28 -30 -28 -68 1 -95 30 -28 68 -28 95 1 28 30 28 68
-1 95 -30 28 -68 28 -95 -1z"/>
                    <path d="M11732 4057 c-28 -30 -28 -68 1 -95 30 -28 68 -28 95 1 28 30 28 68
-1 95 -30 28 -68 28 -95 -1z"/>
                    <path d="M13092 4057 c-28 -30 -28 -68 1 -95 30 -28 68 -28 95 1 28 30 28 68
-1 95 -30 28 -68 28 -95 -1z"/>
                    <path d="M10900 2680 l0 -30 65 0 65 0 0 -40 0 -40 70 0 70 0 0 40 0 40 270 0
270 0 0 -40 0 -40 70 0 70 0 0 40 0 40 60 0 60 0 0 30 0 30 -535 0 -535 0 0
-30z"/>
                </g>
            </svg>
        </div>

        <!--状态以及房间详情-->
        <div class="index-room-container">
        <!--状态-->
        <div class="legend">
            <div style="background-color: #8ed8ff;height:20px;width: 20px;display: inline-block;vertical-align: text-top;"></div>
            <span class="legend-text">未租</span>
            <div style="background-color: #dedede;height:20px;width: 20px;display: inline-block;vertical-align: text-top;"></div>
            <span class="legend-text">已租</span>
            <div style="background-color: #8a95ff;height:20px;width: 20px;display: inline-block;vertical-align: text-top;"></div>
            <span class="legend-text">已定</span>
            <div style="background-color: #ffde83;height:20px;width: 20px;display: inline-block;vertical-align: text-top;"></div>
            <span class="legend-text">自留</span>
        </div>
        <!--室内详情-->
        <div class="index-room-info">
            <h4 class="index-room-info-title"><span class="index-room-num">101</span>室详情</h4>
            <ul class="inline-block index-room-left">
                <li>楼栋：<span class="index-room-floor">1F</span></li>
                <li>门牌：<span class="index-room-num">101</span></li>
                <li>面积：<span class="index-room-squ">99</span>㎡</li>
            </ul>

            <ul class="inline-block index-room-right">
                <li>项目名称：<span class="index-room-times">同济科创园</span></li>
                <li>企业入驻：<span class="index-room-enterprise">暂无企业入驻</span></li>
                <li>地点：<span><span class="index-room-add">同济科创园</span><span class="index-room-num">101</span>室</span>
                </li>
            </ul>
        </div>
    </div>
    </div>

  <div class="dashboard-container">
  <div class="row">
     {:hook('AdminIndex')}
      <div class="col-md-7">
        <div class="box box-default">
          <div class="box-header with-border">
            <h3 class="box-title">系统信息</h3>

            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
              </button>
            </div>
            <!-- /.box-tools -->
          </div>
           <div class="box-body">
              <table class="table table-bordered">
                <tbody>
                  {volist name="server_info" id="info" key="i" mod="2"}
                      {eq name="mod" value="0"}<tr>{/eq}
                      <td>{$key}：<span style="font-weight:normal!important;">{$info}</span></td>
                        {if condition="$i eq count($server_info)"}</tr>
                      {else/}
                        {eq name="mod" value="1"}</tr>{/eq}
                      {/if}
                  {/volist}
                </tbody>
              </table>
           </div>

        </div>
      </div>

      <div class="col-md-5">
        <div class="box">
          <div class="box-header">
            <h3 class="box-title">最新动态</h3>
          </div>
          <!-- /.box-header -->
          <div class="box-body pt-0" id="eacoo_news">
            <table class="table table-condensed f14">
              <tbody>
              <!--{volist name="eacoo_news_list.data" id="row"}
                  <tr>
                    <td><a href="{$row.href}" target="_blank">{$row.title}</a></td>
                  </tr>
              {/volist}-->
              </tbody>
            </table>
          </div>
          <!-- /.box-body -->
        </div>
      </div>
    </div>

  </div>
</section>
{/block}

{block name="script"}
<script>
    let timer = null;
    //楼宇列表
    let buildArr = ['1号楼','2号楼','9号楼'];

    $("#buildName").append(`<option value="0">请选择楼宇</option>`);

    for(let i = 0;i<buildArr.length;i++){
        $("#buildName").append(`<option value="${i+1}">${buildArr[i]}</option>`);
    }

    //楼宇改变
    $("#buildName").change(function () {


    });




    $('.index-bulid-list').on('click', '.index-floor', showPlane);
    //鼠标悬浮楼层显示平面和默认信息
    $('.index-bulid-list').on('mouseenter', '.index-floor', showPlane);

    //点击房间，显示房间的详细信息
    $('.index-room-plane').on('click', '.room', showRoom);
    //鼠标悬浮房间，显示房间的详细信息
    $('.index-room-plane').on('mouseenter', '.room', showRoom);





    //平面显示
    function showPlane() {

        //存储float楼层数
        let floatNum = this.getAttribute("data-float");
        localStorage.setItem("floatNum",floatNum);

        //设置请求地址
        let url = '/admin.php/admin/v1.Index/build_floor/floor/'+floatNum;
        fetch(url,{
            method:'get',
            headers:{
                'Content-Type': 'application/json',
                "apiversion":'1.0',
                "clientfrom":'web',
                "timestamp":'12300',
                "sign":'abcd'
            }
        }).then(res=>res.json())
          .then(data=>{

              //获取楼宇id并存储到本地
              var builds_id = data.data[0][0].building_id;
              localStorage.setItem("builds_id",builds_id);

              //这个接口中building_id是楼宇id（数字），并不是项目名称（文字）

              //设置房间号码
              $('.index-room-num').html(data.data[0][0].room_number);
              //设置楼层
              $('.index-room-floor').html(data.data[0][0].floor);
              //设置面积
              $('.index-room-squ').html(data.data[0][0].area);
              //设置企业入驻
              $('.index-room-enterprise').html(data.data[0][0].enterprise_id);
              //设置svg图
              $('.index-room-plane')[0].innerHTML = data.data.svg;

              //判断每一层楼中的房间数量
              if (getJsonLength(data.data[0]) > 0 ) {

                  //console.log(getJsonLength(data.data[0]));

                  //遍历循坏每一个房间
                  for (let i = 0; i < (getJsonLength(data.data[0])); i++) {

                      var floatInfo = data.data[0][i];

                      //根据status状态码,填充颜色
                      switch (floatInfo.room_status) {
                          //未租状态
                          case 1:
                              document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#8ed8ff";
                              break;
                          //已租状态
                          case 2:
                              document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#dedede";
                              break;
                          //已定状态
                          case 3:
                              document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#8a95ff";
                              break;
                          //自留状态
                          case 4:
                              document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#ffde83";
                              break;
                      }
                  }
              }
        }).catch(error=>console.log(error))



        /*$.ajax({

            url:'/admin.php/admin/v1.Index/build_floor/floor/'+floatNum,
            type:'GET',
            dataType:'json',
            headers:{
                "apiversion":'1.0',
                "clientfrom":'web',
                "timestamp":'12300',
                "sign":'abcd'
            },
            success: function (data) {

                //console.log(data);

                //获取楼宇id并存储到本地
                var builds_id = data.data[0][0].building_id;
                localStorage.setItem("builds_id",builds_id);

                //这个接口中building_id是楼宇id（数字），并不是项目名称（文字）

                //设置房间号码
                $('.index-room-num').html(data.data[0][0].room_number);
                //设置楼层
                $('.index-room-floor').html(data.data[0][0].floor);
                //设置面积
                $('.index-room-squ').html(data.data[0][0].area);
                //设置企业入驻
                $('.index-room-enterprise').html(data.data[0][0].enterprise_id);
                //设置svg图
                $('.index-room-plane')[0].innerHTML = data.data.svg;

                //判断每一层楼中的房间数量
                if (getJsonLength(data.data[0]) > 0 ) {

                    //console.log(getJsonLength(data.data[0]));

                    //遍历循坏每一个房间
                    for (let i = 0; i < (getJsonLength(data.data[0])); i++) {

                        var floatInfo = data.data[0][i];

                        //根据status状态码,填充颜色
                        switch (floatInfo.room_status) {
                            //未租状态
                            case 1:
                                document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#8ed8ff";
                                break;
                            //已租状态
                            case 2:
                                document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#dedede";
                                break;
                            //已定状态
                            case 3:
                                document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#8a95ff";
                                break;
                            //自留状态
                            case 4:
                                document.getElementById("room_" + getNumReg(floatInfo.room_number)).style.fill = "#ffde83";
                                break;
                        }
                    }
                }

            }
        })*/

    }

    //房间详情展示
    function showRoom() {

        //楼宇id
        var builds_id= localStorage.getItem("builds_id");
        //房间号
        var roomNum = localStorage.getItem("floatNum") + getNumReg(this.getAttribute("id"));

        //get带参数，需要判断URL中是否有?
        function get(url,params){
            if(params){
                let paramsArray = [];
                Object.keys(params).forEach(key=>paramsArray.push(key + '=' +params[key]));
                if (url.search(/\?/ === -1)){
                    url += '?' + paramsArray.join('&');
                } else {
                    url += '&' + paramsArray.join('&');
                }
            }
            fetch(url,{
                method:'get',
                headers:{
                    "apiversion":'1.0',
                    "clientfrom":'web',
                    "timestamp":'12300',
                    "sign":'abcd'
                }
            }).then(response => response.json())
                .then(data=>{
                    //设置项目名称
                    $('.index-room-times').html(data.data.building_id);
                    //设置房间号
                    $('.index-room-num').html(data.data.room_number);
                    //设置楼层
                    $('.index-room-floor').html(data.data.floor);
                    //设置面积
                    $('.index-room-squ').html(data.data.area);
                    //设置企业入驻
                    $('.index-room-enterprise').html(data.data.enterprise_id);
                    //设置企业地点 拼接结果
                    $('.index-room-add').html(data.data.building_id);
                })
        }
        //参数
        let data = {
            build_id:builds_id,
            room_id:roomNum
        };
        //get请求
        get('/admin.php/admin/v1.Index/room_info',data)

        /*$.ajax({
            url:'/admin.php/admin/v1.Index/room_info/',
            type:'GET',
            dataType:'json',
            headers:{
                "apiversion":'1.0',
                "clientfrom":'web',
                "timestamp":'12300',
                "sign":'abcd'
            },
            data:{
                build_id:builds_id,
                room_id:roomNum
            },
            success: function (data) {

                //console.log(data);

                //设置项目名称
                $('.index-room-times').html(data.data.building_id);
                //设置房间号
                $('.index-room-num').html(data.data.room_number);
                //设置楼层
                $('.index-room-floor').html(data.data.floor);
                //设置面积
                $('.index-room-squ').html(data.data.area);
                //设置企业入驻
                $('.index-room-enterprise').html(data.data.enterprise_id);
                //设置企业地点 拼接结果
                $('.index-room-add').html(data.data.building_id);
            }
        })*/

    }


    //截取楼层后两位数，如1511 返回 11
    function getNumReg(num) {
        num = String(num);
        return num.substr(num.length - 2);
    }
    //获取json中data的length，并返回
    function getJsonLength(jsonData) {
        var jsonLength = 0;
        for (var item in jsonData) {
            jsonLength++;
        }

        return jsonLength;
    }

</script>

{/block}
